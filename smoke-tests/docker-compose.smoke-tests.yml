version: '3.3'

services:
  miner:
    command: 1.0.0-PREVIEW

  full1:
    command: 1.0.0-PREVIEW
    volumes:
      - full1-db:/root/.rsk/
    environment:
      - rpc.providers.web.http.hosts.1=full1

  full2:
    command: 1.0.0-PREVIEW
    environment:
      - rpc.providers.web.http.hosts.1=full2

  full3:
    command: 1.0.0-PREVIEW
    environment:
      - rpc.providers.web.http.hosts.1=full3
  tests:
    build: ./smoke-tests
    command: npm run smoke-test
volumes:
  full1-db: